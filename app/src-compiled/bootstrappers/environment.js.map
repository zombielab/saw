{"version":3,"sources":["../../src/bootstrappers/environment.js"],"names":[],"mappings":"AAAA;;;;;;AAEA;;;;AACA;;;;AACA;;;;;;AAEA,MAAM,YAAN,CAAmB;AACf,WAAO,SAAP,CAAiB,GAAjB,EAAsB;AAClB;AACA,0BAAgB,aAAhB,CAA8B,MAA9B;AACA,0BAAgB,aAAhB,CAA8B,MAA9B;;AAEA;AACA,YAAI,UAAU,aAAG,YAAH,CAAgB,MAAhB,EAAwB,OAAxB,CAAd;AAAA,YACI,QAAQ,QAAQ,KAAR,CAAc,IAAd,CADZ;;AAGA,aAAK,IAAI,GAAT,IAAgB,KAAhB,EAAuB;AACnB,gBAAI,MAAM,MAAM,GAAN,CAAV;AAAA,gBACI,YAAY,IAAI,IAAJ,EADhB;;AAGA;AACA,gBAAI,UAAU,UAAV,CAAqB,GAArB,MAA8B,IAA9B,IAAsC,UAAU,MAAV,IAAoB,CAA9D,EAAiE;AAC7D;AACH;;AAED,gBAAI,OAAO,UAAU,KAAV,CAAgB,GAAhB,CAAX;AAAA,gBACI,eAAe,KAAK,KAAL,GAAa,IAAb,EADnB;AAAA,gBAEI,iBAAiB,KAAK,IAAL,CAAU,GAAV,EAAe,IAAf,EAFrB;;AAIA;AACA,oBAAQ,GAAR,CAAY,YAAZ,IAA4B,cAA5B;AACH;AACJ;AA1Bc;;kBA6BJ,Y","file":"environment.js","sourcesContent":["\"use strict\";\n\nimport fs from \"fs\";\nimport support_helpers from \"saw-support/helpers\";\nimport app_helpers from \"../helpers\";\n\nclass Bootstrapper {\n    static bootstrap(app) {\n        // Registering helpers to global scope\n        support_helpers.object_extend(global, support_helpers);\n        support_helpers.object_extend(global, app_helpers);\n\n        // Now we\"re gonna try to read .env file and inject parsed data into current process\n        var content = fs.readFileSync(\".env\", \"utf-8\"),\n            array = content.split(\"\\n\");\n\n        for (var key in array) {\n            let row = array[key],\n                statement = row.trim();\n\n            // Skip comments and empty rows\n            if (statement.startsWith(\"#\") === true || statement.length == 0) {\n                continue;\n            }\n\n            let pair = statement.split(\"=\"),\n                statementKey = pair.shift().trim(),\n                statementValue = pair.join(\"=\").trim();\n\n            // Push parsed to current process\n            process.env[statementKey] = statementValue;\n        }\n    }\n}\n\nexport default Bootstrapper;"]}